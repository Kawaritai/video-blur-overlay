<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Blur Toggle Bookmarklet</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
            background: #f9fafb;
        }
        .container {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h1 {
            color: #111827;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #6b7280;
            margin-bottom: 32px;
        }
        .bookmarklet {
            display: inline-block;
            background: #dc2626;
            color: white;
            padding: 14px 28px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin: 24px 0;
            transition: background 0.2s;
        }
        .bookmarklet:hover {
            background: #b91c1c;
        }
        .instructions {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            padding: 16px;
            border-radius: 8px;
            margin: 24px 0;
        }
        .instructions h3 {
            margin-top: 0;
            color: #92400e;
        }
        .features {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin: 24px 0;
        }
        .features h3 {
            margin-top: 0;
            color: #374151;
        }
        ul {
            color: #4b5563;
        }
        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        .warning {
            background: #fef2f2;
            border: 1px solid #f87171;
            color: #991b1b;
            padding: 12px;
            border-radius: 6px;
            margin: 16px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Video Blur Toggle</h1>
        <p class="subtitle">Bookmarklet to toggle a moveable blur overlay on YouTube and Twitch videos</p>

        <p>Remixed from <a href="https://claude.ai/public/artifacts/9c58fb4a-5fae-48ce-aed3-60355bfd033e">TTS Bookmarklet Generator</a> â€” sourced <a href="https://www.lesswrong.com/posts/dCjHGdnXF5vshYfBY/silentbob-s-shortform?commentId=Hfbd6BKbeqe3jnyDp">LW shortform</a>.</p>
        
        <a href="javascript:(function(){if(window.__videoBlurOverlay){if(window.__videoBlurOverlay.parentElement){window.__videoBlurOverlay.remove()}window.__videoBlurOverlay=null;document.removeEventListener('mousemove',window.__handleMouseMove);document.removeEventListener('mouseup',window.__stopAction);return}const youtubeContainer=document.querySelector('.ytp-chrome-bottom')?.parentElement;const twitchContainer=document.querySelector('.video-player__container');const videoContainer=youtubeContainer||twitchContainer;if(!videoContainer)return;if(!document.getElementById('blur-overlay-styles')){const style=document.createElement('style');style.id='blur-overlay-styles';style.textContent='.blur-overlay{position:absolute;backdrop-filter:blur(20px);border:2px solid rgba(255,255,255,0.3);cursor:move;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,0.3)}.blur-overlay-inner{width:100%;height:100%}.resize-handle{position:absolute;width:20px;height:20px;background:rgba(255,255,255,0.3);border:1px solid rgba(255,255,255,0.5);z-index:10000}.resize-handle.top-left{top:0px;left:0px;cursor:nw-resize}.resize-handle.top-right{top:0px;right:0px;cursor:ne-resize}.resize-handle.bottom-left{bottom:0px;left:0px;cursor:sw-resize}.resize-handle.bottom-right{bottom:0px;right:0px;cursor:se-resize}';document.head.appendChild(style)}window.__videoBlurOverlay=document.createElement('div');window.__videoBlurOverlay.className='blur-overlay';const inner=document.createElement('div');inner.className='blur-overlay-inner';window.__videoBlurOverlay.appendChild(inner);const corners=['top-left','top-right','bottom-left','bottom-right'];corners.forEach(corner=>{const handle=document.createElement('div');handle.className=`resize-handle ${corner}`;handle.dataset.corner=corner;window.__videoBlurOverlay.appendChild(handle)});const containerRect=videoContainer.getBoundingClientRect();window.__videoBlurOverlay.style.width='300px';window.__videoBlurOverlay.style.height=`${containerRect.height}px`;window.__videoBlurOverlay.style.left=`${containerRect.width/2-150}px`;window.__videoBlurOverlay.style.top='0px';let isMoving=false;let isResizing=false;let activeHandle=null;let initialMouseX=0;let initialMouseY=0;let initialOverlayX=0;let initialOverlayY=0;let startWidth=0;let startHeight=0;function startMove(e){if(e.target.classList.contains('resize-handle'))return;isMoving=true;const rect=window.__videoBlurOverlay.getBoundingClientRect();initialMouseX=e.clientX;initialMouseY=e.clientY;initialOverlayX=rect.left;initialOverlayY=rect.top;e.preventDefault()}function startResize(e,corner){isResizing=true;activeHandle=corner;const rect=window.__videoBlurOverlay.getBoundingClientRect();startWidth=rect.width;startHeight=rect.height;initialMouseX=e.clientX;initialMouseY=e.clientY;initialOverlayX=rect.left;initialOverlayY=rect.top;e.preventDefault();e.stopPropagation()}window.__handleMouseMove=function(e){if(!isMoving&&!isResizing)return;const containerRect=window.__videoBlurOverlay.parentElement.getBoundingClientRect();if(isMoving){const deltaX=e.clientX-initialMouseX;const deltaY=e.clientY-initialMouseY;let newLeft=initialOverlayX-containerRect.left+deltaX;let newTop=initialOverlayY-containerRect.top+deltaY;newLeft=Math.max(0,Math.min(newLeft,containerRect.width-window.__videoBlurOverlay.offsetWidth));newTop=Math.max(0,Math.min(newTop,containerRect.height-window.__videoBlurOverlay.offsetHeight));window.__videoBlurOverlay.style.left=`${newLeft}px`;window.__videoBlurOverlay.style.top=`${newTop}px`}if(isResizing){const deltaX=e.clientX-initialMouseX;const deltaY=e.clientY-initialMouseY;const minSize=50;let newWidth=startWidth;let newHeight=startHeight;let newLeft=initialOverlayX-containerRect.left;let newTop=initialOverlayY-containerRect.top;switch(activeHandle){case'top-left':newWidth=Math.max(minSize,startWidth-deltaX);newHeight=Math.max(minSize,startHeight-deltaY);newLeft+=startWidth-newWidth;newTop+=startHeight-newHeight;break;case'top-right':newWidth=Math.max(minSize,startWidth+deltaX);newHeight=Math.max(minSize,startHeight-deltaY);newTop+=startHeight-newHeight;break;case'bottom-left':newWidth=Math.max(minSize,startWidth-deltaX);newHeight=Math.max(minSize,startHeight+deltaY);newLeft+=startWidth-newWidth;break;case'bottom-right':newWidth=Math.max(minSize,startWidth+deltaX);newHeight=Math.max(minSize,startHeight+deltaY);break}newLeft=Math.max(0,Math.min(newLeft,containerRect.width-minSize));newTop=Math.max(0,Math.min(newTop,containerRect.height-minSize));newWidth=Math.min(newWidth,containerRect.width-newLeft);newHeight=Math.min(newHeight,containerRect.height-newTop);window.__videoBlurOverlay.style.width=`${newWidth}px`;window.__videoBlurOverlay.style.height=`${newHeight}px`;window.__videoBlurOverlay.style.left=`${newLeft}px`;window.__videoBlurOverlay.style.top=`${newTop}px`}};window.__stopAction=function(){isMoving=false;isResizing=false;activeHandle=null};window.__videoBlurOverlay.addEventListener('mousedown',startMove);window.__videoBlurOverlay.querySelectorAll('.resize-handle').forEach(handle=>{handle.addEventListener('mousedown',(e)=>startResize(e,handle.dataset.corner))});document.addEventListener('mousemove',window.__handleMouseMove);document.addEventListener('mouseup',window.__stopAction);videoContainer.appendChild(window.__videoBlurOverlay)})();" class="bookmarklet">Video Blur Toggle</a>
        
        <div class="instructions">
            <h3>ðŸ“š How to Install</h3>
            <ol>
                <li>Show your bookmarks bar (Ctrl/Cmd + Shift + B)</li>
                <li>Drag the red "Video Blur Toggle" button to your bookmarks bar</li>
                <li>Or right-click it and select "Bookmark This Link"</li>
            </ol>
            
            <h3>ðŸŽ¯ How to Use</h3>
            <ol>
                <li>Go to a YouTube or Twitch video</li>
                <li>Click the bookmarklet to show blur overlay</li>
                <li>Drag the overlay to move it around</li>
                <li>Drag the inset corner areas to resize</li>
                <li>Click bookmarklet again to hide overlay</li>
            </ol>
        </div>

        <div class="warning">
            <strong>Note:</strong> This bookmarklet only works on YouTube and Twitch video pages. The blur overlay will appear over the video player area.
        </div>

        <h3>Raw Bookmarklet Code</h3>
        <div class="code-block" id="code-display">javascript:(function(){if(window.__videoBlurOverlay){if(window.__videoBlurOverlay.parentElement){window.__videoBlurOverlay.remove()}window.__videoBlurOverlay=null;document.removeEventListener('mousemove',window.__handleMouseMove);document.removeEventListener('mouseup',window.__stopAction);return}const youtubeContainer=document.querySelector('.ytp-chrome-bottom')?.parentElement;const twitchContainer=document.querySelector('.video-player__container');const videoContainer=youtubeContainer||twitchContainer;if(!videoContainer)return;if(!document.getElementById('blur-overlay-styles')){const style=document.createElement('style');style.id='blur-overlay-styles';style.textContent='.blur-overlay{position:absolute;backdrop-filter:blur(20px);border:2px solid rgba(255,255,255,0.3);border-radius:8px;cursor:move;z-index:9999;box-shadow:0 4px 20px rgba(0,0,0,0.3)}.blur-overlay-inner{width:100%;height:100%}.resize-handle{position:absolute;width:12px;height:12px;background:rgba(255,255,255,0.8);border:1px solid rgba(0,0,0,0.3);border-radius:50%;cursor:pointer;z-index:10000}.resize-handle.top-left{top:-6px;left:-6px;cursor:nw-resize}.resize-handle.top-right{top:-6px;right:-6px;cursor:ne-resize}.resize-handle.bottom-left{bottom:-6px;left:-6px;cursor:sw-resize}.resize-handle.bottom-right{bottom:-6px;right:-6px;cursor:se-resize}';document.head.appendChild(style)}window.__videoBlurOverlay=document.createElement('div');window.__videoBlurOverlay.className='blur-overlay';const inner=document.createElement('div');inner.className='blur-overlay-inner';window.__videoBlurOverlay.appendChild(inner);const corners=['top-left','top-right','bottom-left','bottom-right'];corners.forEach(corner=>{const handle=document.createElement('div');handle.className=`resize-handle ${corner}`;handle.dataset.corner=corner;window.__videoBlurOverlay.appendChild(handle)});const containerRect=videoContainer.getBoundingClientRect();window.__videoBlurOverlay.style.width='300px';window.__videoBlurOverlay.style.height=`${containerRect.height}px`;window.__videoBlurOverlay.style.left=`${containerRect.width/2-150}px`;window.__videoBlurOverlay.style.top='0px';let isMoving=false;let isResizing=false;let activeHandle=null;let initialMouseX=0;let initialMouseY=0;let initialOverlayX=0;let initialOverlayY=0;let startWidth=0;let startHeight=0;function startMove(e){if(e.target.classList.contains('resize-handle'))return;isMoving=true;const rect=window.__videoBlurOverlay.getBoundingClientRect();initialMouseX=e.clientX;initialMouseY=e.clientY;initialOverlayX=rect.left;initialOverlayY=rect.top;e.preventDefault()}function startResize(e,corner){isResizing=true;activeHandle=corner;const rect=window.__videoBlurOverlay.getBoundingClientRect();startWidth=rect.width;startHeight=rect.height;initialMouseX=e.clientX;initialMouseY=e.clientY;initialOverlayX=rect.left;initialOverlayY=rect.top;e.preventDefault();e.stopPropagation()}window.__handleMouseMove=function(e){if(!isMoving&&!isResizing)return;const containerRect=window.__videoBlurOverlay.parentElement.getBoundingClientRect();if(isMoving){const deltaX=e.clientX-initialMouseX;const deltaY=e.clientY-initialMouseY;let newLeft=initialOverlayX-containerRect.left+deltaX;let newTop=initialOverlayY-containerRect.top+deltaY;newLeft=Math.max(0,Math.min(newLeft,containerRect.width-window.__videoBlurOverlay.offsetWidth));newTop=Math.max(0,Math.min(newTop,containerRect.height-window.__videoBlurOverlay.offsetHeight));window.__videoBlurOverlay.style.left=`${newLeft}px`;window.__videoBlurOverlay.style.top=`${newTop}px`}if(isResizing){const deltaX=e.clientX-initialMouseX;const deltaY=e.clientY-initialMouseY;const minSize=50;let newWidth=startWidth;let newHeight=startHeight;let newLeft=initialOverlayX-containerRect.left;let newTop=initialOverlayY-containerRect.top;switch(activeHandle){case'top-left':newWidth=Math.max(minSize,startWidth-deltaX);newHeight=Math.max(minSize,startHeight-deltaY);newLeft+=startWidth-newWidth;newTop+=startHeight-newHeight;break;case'top-right':newWidth=Math.max(minSize,startWidth+deltaX);newHeight=Math.max(minSize,startHeight-deltaY);newTop+=startHeight-newHeight;break;case'bottom-left':newWidth=Math.max(minSize,startWidth-deltaX);newHeight=Math.max(minSize,startHeight+deltaY);newLeft+=startWidth-newWidth;break;case'bottom-right':newWidth=Math.max(minSize,startWidth+deltaX);newHeight=Math.max(minSize,startHeight+deltaY);break}newLeft=Math.max(0,Math.min(newLeft,containerRect.width-minSize));newTop=Math.max(0,Math.min(newTop,containerRect.height-minSize));newWidth=Math.min(newWidth,containerRect.width-newLeft);newHeight=Math.min(newHeight,containerRect.height-newTop);window.__videoBlurOverlay.style.width=`${newWidth}px`;window.__videoBlurOverlay.style.height=`${newHeight}px`;window.__videoBlurOverlay.style.left=`${newLeft}px`;window.__videoBlurOverlay.style.top=`${newTop}px`}};window.__stopAction=function(){isMoving=false;isResizing=false;activeHandle=null};window.__videoBlurOverlay.addEventListener('mousedown',startMove);window.__videoBlurOverlay.querySelectorAll('.resize-handle').forEach(handle=>{handle.addEventListener('mousedown',(e)=>startResize(e,handle.dataset.corner))});document.addEventListener('mousemove',window.__handleMouseMove);document.addEventListener('mouseup',window.__stopAction);videoContainer.appendChild(window.__videoBlurOverlay)})();</div>
    </div>
</body>
</html>